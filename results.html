<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QV3YKGRPCD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-QV3YKGRPCD');
    </script>

    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>SapplyValues Results</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <h1 class="title">SapplyValues</h1>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 19">
        <text x="50%" y="15" class="svgHeader">SapplyValues</text>
    </svg>
    <hr>

    <h1 class="title">Results</h1></br>
    <p style="text-align:center;margin:-2px auto">If you like this site, <a href="https://ko-fi.com/sunkdatadiver">consider chucking me a few bucks</a> :)))</p></br>
    <svg id="svgHeader" style="width: 100%;" viewBox="0 0 112 19">
        <text x="50%" y="15" class="svgHeader">Results</text>
    </svg>

<img src="https://bahuwrihi.github.io/awakened-compass/compass.png" id="background" style="display:none;">
    <canvas id="resultsCanvas" width="1850" height="1600"></canvas>
    <br>
    <p style="text-align:center;margin:-2px auto">Hint: you can download this image directly. No need to screenshot!</p></br>
    <button class="button" onclick="location.href='index.html';" style="background-color: #2196f3;">Back</button> <br>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const globalScore = parseFloat(urlParams.get("global")) || 0; // Assuming you pass the global score in the URL

        // Define predefined positions for each group
        const predefinedPositions = {
        A: [{x: 775, y: 531}, {x: 814, y: 357}, {x: 850, y: 200}],
    	B: [{x: 825, y: 556}, {x: 937, y: 414}, {x: 1037, y: 290}],
   	C: [{x: 859, y: 598}, {x: 1022, y: 521}, {x: 1166, y: 451}],
   	D: [{x: 871, y: 653}, {x: 1053, y: 653}, {x: 1212, y: 653}],
   	E: [{x: 860, y: 707}, {x: 1024, y: 787}, {x: 1166, y: 855}],
   	F: [{x: 825, y: 751}, {x: 940, y: 985}, {x: 1038, y: 1017}],
    	G: [{x: 775, y: 776}, {x: 816, y: 954}, {x: 851, y: 1107}],
    	H: [{x: 718, y: 775}, {x: 677, y: 955}, {x: 643, y: 1106}],
    	I: [{x: 669, y: 750}, {x: 554, y: 894}, {x: 456, y: 1016}],
    	J: [{x: 634, y: 708}, {x: 469, y: 787}, {x: 329, y: 854}],
    	K: [{x: 622, y: 653}, {x: 440, y: 653}, {x: 283, y: 653}],
    	L: [{x: 634, y: 599}, {x: 472, y: 521}, {x: 329, y: 452}],
    	M: [{x: 668, y: 556}, {x: 557, y: 415}, {x: 457, y: 290}],
    	N: [{x: 719, y: 531}, {x: 678, y: 357}, {x: 642, y: 200}]
    };
 window.onload = function () {
            const background = document.getElementById('background');
            const c = document.getElementById("resultsCanvas");
            const ctx = c.getContext("2d");

            background.onload = function () {
                ctx.drawImage(background, 0, 0);

                // Draw the line for global score
                var x = (globalScore + 10) * (c.width / 20);
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, c.height);
                ctx.lineWidth = 2;
                ctx.strokeStyle = "red";
                ctx.stroke();

                // Draw dots for each group
                for (const [group, positions] of Object.entries(predefinedPositions)) {
                    const score = parseFloat(urlParams.get(group)) || 0; // Get the score for the group from URL parameters
                    const third = Math.floor(score / (2 / 3));
                    const position = positions[third];

                    ctx.beginPath();
                    ctx.arc(position.x, position.y, 25, 0, 2 * Math.PI);
                    ctx.fillStyle = 'red';
                    ctx.fill();
                    ctx.stroke();
                }

                // Draw the text
                ctx.font="50px Montserrat";
                ctx.textAlign="center";
                ctx.fillStyle="#222222";
                ctx.fillText("Global Score: " + globalScore, 725, 1375);
                ctx.textAlign="right";
                ctx.font="60px Montserrat";
                ctx.fillText("SapplyValues.github.io", 1820, 1560);
            };

background.src = "https://bahuwrihi.github.io/awakened-compass/compass.png";
        };
    </script>
</body>
</html>
